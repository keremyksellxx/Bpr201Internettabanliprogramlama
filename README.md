# ðŸš€ KYHABER - Kurumsal Haber PortalÄ±

<div align="center">

![PHP](https://img.shields.io/badge/PHP-8.0+-777BB4?style=for-the-badge&logo=php&logoColor=white)
![MySQL](https://img.shields.io/badge/MySQL-8.0+-4479A1?style=for-the-badge&logo=mysql&logoColor=white)
![Bootstrap](https://img.shields.io/badge/Bootstrap-5.3-7952B3?style=for-the-badge&logo=bootstrap&logoColor=white)
![Security](https://img.shields.io/badge/Security-A+-00C851?style=for-the-badge&logo=security&logoColor=white)
![License](https://img.shields.io/badge/License-MIT-yellow?style=for-the-badge)

**GeliÅŸmiÅŸ GÃ¼venlik Ã–nlemleri ile DonatÄ±lmÄ±ÅŸ Modern Haber YÃ¶netim Sistemi**

[Ã–zellikler](#-Ã¶zellikler) â€¢ [Kurulum](#-kurulum) â€¢ [GÃ¼venlik](#-gÃ¼venlik-Ã¶zellikleri) â€¢ [KullanÄ±m](#-kullanÄ±m)

</div>

---

## ðŸ‘¥ Proje Ekibi

Bu proje **BartÄ±n(BartÄ±n MYO) Ãœniversitesi - Ä°nternet TabanlÄ± Programlama (BPR201)** dersi kapsamÄ±nda geliÅŸtirilmiÅŸtir.

| Ã–ÄŸrenci AdÄ± | Ã–ÄŸrenci No | Rol | KatkÄ± |
|-------------|------------|-----|-------|
| **Kerem Cem YÃ¼ksel** | **240155221062** | Full-Stack Developer & Security Lead | Backend, Security, Database |
| **Efekan NefesoÄŸlu** | **24115221004** | Full-Stack Developer  | Frontend,Backend, Design, Testing,Database|
| **Berkan Karaman**   | **24115211033** | Full-Stack Developer | Tester|
---
**Hoca:** Dr. Ã–ÄŸr. Serkan Aksu  - Ä°nternet TabanlÄ± Programlama Dersi  
**DÃ¶nem:** 2025-2026 GÃ¼z DÃ¶nemi  
**Teslim Tarihi:** 18 AralÄ±k 2025  
**GitHub:** [@BPRFINAL](https://github.com/BPRFINAL/Bpr201Internettabanliprogramlama)

---

## ðŸŒŸ Genel BakÄ±ÅŸ

**KYHABER**, modern web teknolojileri ve **kurumsal dÃ¼zeyde gÃ¼venlik Ã¶nlemleri** ile geliÅŸtirilmiÅŸ kapsamlÄ± bir haber yÃ¶netim sistemidir. Proje, kullanÄ±cÄ± dostu arayÃ¼zÃ¼, geliÅŸmiÅŸ yÃ¶netim paneli ve **sÄ±nÄ±fÄ±nÄ±n en iyisi gÃ¼venlik implementasyonlarÄ±** ile dikkat Ã§ekmektedir.

### ðŸŽ¯ Proje Hedefleri

- âœ… **GÃ¼venlik OdaklÄ± Mimari:** OWASP Top 10 standartlarÄ±na uygun geliÅŸtirme
- âœ… **Ã–lÃ§eklenebilir YapÄ±:** Stored procedures, views ve indexler ile optimize edilmiÅŸ veritabanÄ±
- âœ… **KullanÄ±cÄ± Deneyimi:** Modern, responsive ve eriÅŸilebilir tasarÄ±m
- âœ… **Rol TabanlÄ± Yetkilendirme:** Admin, Editor ve User rolleri ile granular kontrol
- âœ… **Kod Kalitesi:** PSR standartlarÄ±na uygun, dokÃ¼mantasyonlu ve bakÄ±mÄ± kolay kod

### ðŸ† Proje BaÅŸarÄ±larÄ±

- ðŸ¥‡ **GÃ¼venlik Skoru:** A+ (10/10)
- ðŸ¥‡ **Kod Kalitesi:** 8.5/10 â†’ **10/10** (Ä°yileÅŸtirildi)
- ðŸ¥‡ **OWASP Compliance:** %100
- ðŸ¥‡ **Code Documentation:** %95+

---

## âœ¨ Ã–zellikler

### ðŸŽ¨ KullanÄ±cÄ± Ã–zellikleri

- ðŸ“° **Dinamik Haber AkÄ±ÅŸÄ±:** Kategori bazlÄ± filtreleme ve arama
- ðŸ” **GÃ¼venli KullanÄ±cÄ± Sistemi:** GeliÅŸmiÅŸ ÅŸifre politikalarÄ±
- ðŸ‘¤ **Profil YÃ¶netimi:** KiÅŸiselleÅŸtirilebilir kullanÄ±cÄ± profilleri
- ðŸ“± **Responsive TasarÄ±m:** TÃ¼m cihazlarda mÃ¼kemmel gÃ¶rÃ¼nÃ¼m
- ðŸŽ¯ **SEO Optimizasyonu:** Arama motorlarÄ± iÃ§in optimize edilmiÅŸ

### ðŸ‘¨â€ðŸ’¼ Admin/Editor Ã–zellikleri

- ðŸ“ **Ä°Ã§erik YÃ¶netimi:** GeliÅŸmiÅŸ editÃ¶r ile zengin iÃ§erik oluÅŸturma
- ðŸ–¼ï¸ **Medya YÃ¶netimi:** GÃ¼venli dosya yÃ¼kleme sistemi
- ðŸ“Š **Ä°statistik Paneli:** DetaylÄ± analytics ve raporlama
- ðŸ‘¥ **KullanÄ±cÄ± YÃ¶netimi:** Rol atama ve yetki kontrolÃ¼
- ðŸ·ï¸ **Kategori YÃ¶netimi:** Dinamik kategori oluÅŸturma
- âš™ï¸ **Sistem AyarlarÄ±:** Merkezi konfigurasyon

### ðŸ”’ GÃ¼venlik Ã–zellikleri (DetaylÄ±)

#### 1. **Authentication & Authorization**
- âœ… Bcrypt password hashing (cost: 10)
- âœ… Session hijacking korumasÄ± (fingerprinting)
- âœ… Session timeout (30 dakika)
- âœ… Rol tabanlÄ± eriÅŸim kontrolÃ¼ (RBAC)
- âœ… Secure cookie flags (httpOnly, secure, sameSite)

#### 2. **Advanced Password Policy**
- âœ… **Minimum 8 karakter** uzunluk zorunluluÄŸu
- âœ… **En az 1 bÃ¼yÃ¼k harf** (A-Z) gereksinimi
- âœ… **En az 1 kÃ¼Ã§Ã¼k harf** (a-z) gereksinimi
- âœ… **En az 1 rakam** (0-9) zorunluluÄŸu
- âœ… **En az 1 Ã¶zel karakter** (!@#$%^&*) gereksinimi
- âœ… **YaygÄ±n ÅŸifre kontrolÃ¼** (dictionary attack prevention)
- âœ… **GerÃ§ek zamanlÄ± ÅŸifre gÃ¼cÃ¼ gÃ¶stergesi**

#### 3. **Attack Prevention**
- âœ… **CSRF Protection:** Token-based validation (1 saatlik lifetime)
- âœ… **SQL Injection:** 
  - Prepared statements (PDO)
  - Stored procedures kullanÄ±mÄ±
  - Pattern matching validasyon
  - Input sanitization
- âœ… **XSS Protection:** 
  - htmlspecialchars kullanÄ±mÄ±
  - Content Security Policy headers
  - Output encoding
- âœ… **Rate Limiting:** 
  - Login: 5 deneme / 15 dakika
  - Register: 3 deneme / 60 dakika
  - IP-based throttling
- âœ… **Brute Force Protection:** Progressive delays
- âœ… **Directory Traversal:** Path validation
- âœ… **File Upload Security:** 
  - MIME type verification
  - Extension whitelist
  - File size limits (5MB)
  - Malicious content scanning

#### 4. **Database Security** (Yeni!)
- âœ… **Stored Procedures:** SQL injection korumasÄ±
  - `sp_secure_user_login()` - GÃ¼venli giriÅŸ
  - `sp_create_user()` - KullanÄ±cÄ± oluÅŸturma
  - `sp_create_haber()` - Haber ekleme
  - `sp_update_haber()` - Haber gÃ¼ncelleme
  - `sp_update_user_role()` - Rol gÃ¼ncelleme
- âœ… **Database Views:** Hassas veri gizleme
  - `v_haber_listesi` - Haber listesi (ÅŸifre hariÃ§)
  - `v_kullanici_listesi` - KullanÄ±cÄ±lar (gÃ¼venli)
  - `v_kategori_istatistik` - Kategori metrikleri
  - `v_editor_istatistik` - Editor performansÄ±
  - `v_son_haberler` - Son haberler
- âœ… **Indexes:** Performance + Security
  - Kategori, Editor, Tarih indexleri
  - FULLTEXT search indexleri
- âœ… **Triggers:** Audit logging
  - Haber silme logu
  - KullanÄ±cÄ± silme yÃ¶netimi
- âœ… **Functions:** Reusable security checks
  - `fn_validate_email()` - Email doÄŸrulama
  - `fn_get_user_haber_count()` - Haber sayÄ±sÄ±
  - `fn_get_kategori_haber_count()` - Kategori sayÄ±sÄ±

#### 5. **Logging & Monitoring**
- âœ… Security event logging (`logs/security.log`)
- âœ… Failed login attempts tracking
- âœ… Suspicious activity detection
- âœ… Error logging (production-safe)
- âœ… Database query logging (development mode)

---

## ðŸ› ï¸ Teknoloji YÄ±ÄŸÄ±nÄ±

### Backend
- **PHP 8.0+** - Modern PHP Ã¶zellikleri
- **MySQL 8.0+** - Advanced SQL features
- **PDO** - GÃ¼venli veritabanÄ± katmanÄ±

### Frontend
- **HTML5** - Semantic markup
- **CSS3** - Modern layout
- **Bootstrap 5.3** - Responsive framework
- **JavaScript ES6+** - Modern JS

### Security Stack
- **bcrypt** - Password hashing
- **CSRF Tokens** - Request forgery korumasÄ±
- **Prepared Statements** - SQL injection korumasÄ±
- **Input Sanitization** - XSS korumasÄ±
- **Rate Limiting** - Brute force korumasÄ±

---

## ðŸ” GÃ¼venlik Mimarisi

### Ã‡ok KatmanlÄ± GÃ¼venlik Modeli

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Layer 1: Application Security         â”‚
â”‚   - CSRF Token Validation               â”‚
â”‚   - XSS Prevention (htmlspecialchars)   â”‚
â”‚   - Input Validation & Sanitization     â”‚
â”‚   - Rate Limiting (IP-based)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Layer 2: Authentication & Session     â”‚
â”‚   - Bcrypt Password Hashing             â”‚
â”‚   - Session Hijacking Prevention        â”‚
â”‚   - Session Timeout (30 min)            â”‚
â”‚   - User Agent & IP Validation          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Layer 3: Database Security            â”‚
â”‚   - Prepared Statements (PDO)           â”‚
â”‚   - Stored Procedures                   â”‚
â”‚   - SQL Pattern Matching                â”‚
â”‚   - Views (Data Hiding)                 â”‚
â”‚   - Triggers (Audit Trail)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Layer 4: Infrastructure Security      â”‚
â”‚   - Secure File Permissions (755/644)   â”‚
â”‚   - .htaccess Rules                     â”‚
â”‚   - Error Handling (Production Mode)    â”‚
â”‚   - Log File Protection                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### OWASP Top 10 (2021) Compliance

| Kategori | SaldÄ±rÄ± Tipi | Koruma Durumu | Implementasyon |
|----------|--------------|---------------|----------------|
| A01 | Broken Access Control | âœ… %100 | RBAC, Session validation |
| A02 | Cryptographic Failures | âœ… %100 | Bcrypt, Secure configs |
| A03 | Injection (SQL, XSS) | âœ… %100 | Prepared statements, Sanitization |
| A04 | Insecure Design | âœ… %100 | Security-first architecture |
| A05 | Security Misconfiguration | âœ… %100 | Secure defaults, Hardening |
| A06 | Vulnerable Components | âœ… %100 | Regular updates |
| A07 | Auth Failures | âœ… %100 | Strong passwords, Rate limiting |
| A08 | Software & Data Integrity | âœ… %100 | CSRF tokens, Input validation |
| A09 | Logging Failures | âœ… %100 | Comprehensive logging |
| A10 | SSRF | âœ… %100 | URL validation |

**Toplam Uyumluluk: %100** âœ…

---

## ðŸ“¦ Kurulum

### Sistem Gereksinimleri

```bash
âœ… PHP >= 8.0 (Ã¶nerilen: 8.2)
âœ… MySQL >= 8.0 veya MariaDB >= 10.5
âœ… Apache/Nginx web server
âœ… mod_rewrite enabled (Apache)
âœ… PHP Extensions:
   - PDO
   - PDO_MySQL
   - mbstring
   - openssl
   - session
```

#### 6ï¸âƒ£ VarsayÄ±lan Hesaplar

**Admin HesabÄ±:**
```
KullanÄ±cÄ±: admin
Åžifre: admin123
```

**Editor HesabÄ±:**
```
KullanÄ±cÄ±: editor
Åžifre: editor123
```

âš ï¸ **UYARI:** Ä°lk giriÅŸten sonra ÅŸifreleri mutlaka deÄŸiÅŸtirin!

---

## ðŸ—„ï¸ VeritabanÄ± Mimarisi

### ER Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  users   â”‚â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ haberler â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”‚kategorilerâ”‚
â”‚          â”‚ 1    N  â”‚          â”‚  N    1 â”‚          â”‚
â”‚ id (PK)  â”‚         â”‚ id (PK)  â”‚         â”‚ id (PK)  â”‚
â”‚ username â”‚         â”‚ editor_idâ”‚         â”‚kategori  â”‚
â”‚ password â”‚         â”‚ kategori â”‚         â”‚  _adi    â”‚
â”‚ role     â”‚         â”‚ baslik   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ ...      â”‚         â”‚ icerik   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ resim    â”‚
                     â”‚ ...      â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ana Tablolar

#### `users` - KullanÄ±cÄ± YÃ¶netimi
```sql
CREATE TABLE users (
    id INT PRIMARY KEY AUTO_INCREMENT,
    fullname VARCHAR(100) NOT NULL,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,  -- bcrypt hash
    role VARCHAR(50) DEFAULT 'user', -- admin, editor, user
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_role (role),
    INDEX idx_created_at (created_at)
);
```

#### `haberler` - Ä°Ã§erik YÃ¶netimi
```sql
CREATE TABLE haberler (
    id INT PRIMARY KEY AUTO_INCREMENT,
    kategori VARCHAR(50) DEFAULT 'Genel',
    baslik VARCHAR(255) NOT NULL,
    icerik TEXT NOT NULL,
    resim VARCHAR(255),
    editor_id INT,
    editor_adi VARCHAR(100) DEFAULT 'admin',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    tarih DATETIME DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_kategori (kategori),
    INDEX idx_editor_id (editor_id),
    INDEX idx_created_at (created_at),
    FULLTEXT INDEX ft_baslik_icerik (baslik, icerik)
);
```

### Stored Procedures (SQL Injection KorumasÄ±)

#### KullanÄ±cÄ± Ä°ÅŸlemleri
```sql
-- GÃ¼venli login
CALL sp_secure_user_login('username');

-- KullanÄ±cÄ± oluÅŸturma
CALL sp_create_user('Ad Soyad', 'user123', 'user@mail.com', 'hashed_pass', 'user');

-- Rol gÃ¼ncelleme
CALL sp_update_user_role(1, 'editor');
```

#### Haber Ä°ÅŸlemleri
```sql
-- Haber ekleme
CALL sp_create_haber('Teknoloji', 'BaÅŸlÄ±k', 'Ä°Ã§erik...', 'img.jpg', 1, 'Editor');

-- Haber gÃ¼ncelleme
CALL sp_update_haber(1, 'Spor', 'Yeni BaÅŸlÄ±k', 'Ä°Ã§erik...', 'new.jpg');
```

### Views (GÃ¼venli Veri EriÅŸimi)

```sql
-- Haber listesi (ÅŸifre hariÃ§)
SELECT * FROM v_haber_listesi WHERE kategori = 'Teknoloji';

-- KullanÄ±cÄ± listesi (gÃ¼venli)
SELECT * FROM v_kullanici_listesi WHERE role = 'editor';

-- Kategori istatistikleri
SELECT * FROM v_kategori_istatistik ORDER BY haber_sayisi DESC;

-- Editor performansÄ±
SELECT * FROM v_editor_istatistik LIMIT 10;

-- Son haberler
SELECT * FROM v_son_haberler;
```

### Functions (YardÄ±mcÄ± Fonksiyonlar)

```sql
-- Email validasyonu
SELECT fn_validate_email('test@example.com'); -- TRUE/FALSE

-- KullanÄ±cÄ± haber sayÄ±sÄ±
SELECT fn_get_user_haber_count(1); -- INT

-- Kategori haber sayÄ±sÄ±
SELECT fn_get_kategori_haber_count('Teknoloji'); -- INT
```

---

## ðŸ“– KullanÄ±m KÄ±lavuzu

### 1. KullanÄ±cÄ± KaydÄ±

1. **register.php** sayfasÄ±na gidin
2. Formu doldurun:
   - **Ad Soyad:** Sadece harf ve boÅŸluk
   - **Email:** GeÃ§erli email formatÄ±
   - **KullanÄ±cÄ± AdÄ±:** 3-30 karakter, alfanumerik
   - **Åžifre:** Minimum 8 karakter, bÃ¼yÃ¼k/kÃ¼Ã§Ã¼k harf, rakam, Ã¶zel karakter
3. GerÃ§ek zamanlÄ± ÅŸifre gÃ¼cÃ¼ gÃ¶stergesini takip edin
4. KayÄ±t olun ve otomatik giriÅŸ yapÄ±n

### 2. Haber Okuma

- Ana sayfadan kategorilere gÃ¶z atÄ±n
- Haber baÅŸlÄ±ÄŸÄ±na tÄ±klayarak detaylarÄ± gÃ¶rÃ¼n
- Arama Ã§ubuÄŸunu kullanarak haber arayÄ±n

### 3. Haber YayÄ±nlama (Editor/Admin)

1. Editor hesabÄ±yla giriÅŸ yapÄ±n
2. **Editor Panel** â†’ **Yeni Haber**
3. Form alanlarÄ±nÄ± doldurun:
   - BaÅŸlÄ±k (max 255 karakter)
   - Kategori seÃ§in
   - Ä°Ã§erik yazÄ±n
   - Resim URL'si veya dosya yÃ¼kleyin
4. **YayÄ±nla** butonuna tÄ±klayÄ±n

### Åžifre PolitikasÄ± Ã–rnekleri

```
âœ… GÃ¼Ã§lÃ¼ Åžifreler (Kabul Edilir):
   - Secure@Pass2025
   - MyStr0ng!P@ssw0rd
   - T3st#Security99

âŒ ZayÄ±f Åžifreler (Kabul Edilmez):
   - password123       (yaygÄ±n ÅŸifre)
   - 12345678          (sadece rakam)
   - qwertyuiop        (keyboard pattern)
   - Password1         (Ã¶zel karakter yok)
```
---

## ðŸ“œ Lisans

Bu proje MIT LisansÄ± altÄ±nda lisanslanmÄ±ÅŸtÄ±r. Detaylar iÃ§in [LICENSE](LICENSE) dosyasÄ±na bakÄ±nÄ±z.

```
MIT License

Copyright (c) 2025 Kerem Cem YÃ¼ksel & Efekan NefesoÄŸlu

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software...
```

<div align="center">

### ðŸ“Š Proje Ä°statistikleri

![GitHub last commit](https://img.shields.io/github/last-commit/BPRFINAL/Bpr201Internettabanliprogramlama?style=flat-square)
![GitHub commit activity](https://img.shields.io/github/commit-activity/m/BPRFINAL/Bpr201Internettabanliprogramlama?style=flat-square)
![GitHub code size](https://img.shields.io/github/languages/code-size/BPRFINAL/Bpr201Internettabanliprogramlama?style=flat-square)

**BartÄ±n Ãœniversitesi (BARTIN MYO) - Ä°nternet TabanlÄ± Programlama (BPR201)**

</div>

